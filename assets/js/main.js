const e=.7,t=.7,o=.2,n=.7,a="power1.in",i="power2.out",r="power2.in",s="sine.out";let c=!1;function handleDropdownKeys(e){const t=document.activeElement;if(t&&(["input","textarea"].includes(t.tagName.toLowerCase())||t.isContentEditable))return;const o=document.querySelector(".dropdown-toggle.js-only");o&&("i"!==e.key.toLowerCase()&&"m"!==e.key.toLowerCase()||(e.preventDefault(),o.click()),"Escape"===e.key&&"true"===o.getAttribute("aria-expanded")&&(e.preventDefault(),o.click()))}class PostNavigator{constructor(e){this.swipeTarget=e.querySelector(".post"),this.swipeTarget&&(this.prevUrl=e.dataset.prevUrl,this.nextUrl=e.dataset.nextUrl,this.touchStartX=0,this.touchStartY=0,this.touchEndX=0,this.touchEndY=0,this.isSwiping=!1,this.boundHandleKeyDown=this.handleKeyDown.bind(this),this.boundHandleTouchStart=this.handleTouchStart.bind(this),this.boundHandleTouchMove=this.handleTouchMove.bind(this),this.boundHandleTouchEnd=this.handleTouchEnd.bind(this),this.addEventListeners())}addEventListeners(){document.addEventListener("keydown",this.boundHandleKeyDown),this.swipeTarget.addEventListener("touchstart",this.boundHandleTouchStart,{passive:!0}),this.swipeTarget.addEventListener("touchmove",this.boundHandleTouchMove,{passive:!0}),this.swipeTarget.addEventListener("touchend",this.boundHandleTouchEnd)}handleKeyDown(e){"ArrowLeft"===e.key&&this.prevUrl?barba.go(this.prevUrl):"ArrowRight"===e.key&&this.nextUrl&&barba.go(this.nextUrl)}handleTouchStart(e){this.touchStartX=e.touches[0].clientX,this.touchStartY=e.touches[0].clientY,this.isSwiping=!0}handleTouchMove(e){this.isSwiping&&(this.touchEndX=e.touches[0].clientX,this.touchEndY=e.touches[0].clientY)}handleTouchEnd(){if(!this.isSwiping)return;const e=this.touchEndX-this.touchStartX,t=this.touchEndY-this.touchStartY;Math.abs(e)>Math.abs(t)&&Math.abs(e)>50&&(e>0&&this.prevUrl?barba.go(this.prevUrl):e<0&&this.nextUrl&&barba.go(this.nextUrl)),this.isSwiping=!1,this.touchStartX=0,this.touchStartY=0,this.touchEndX=0,this.touchEndY=0}destroy(){document.removeEventListener("keydown",this.boundHandleKeyDown),this.swipeTarget&&(this.swipeTarget.removeEventListener("touchstart",this.boundHandleTouchStart),this.swipeTarget.removeEventListener("touchmove",this.boundHandleTouchMove),this.swipeTarget.removeEventListener("touchend",this.boundHandleTouchEnd))}}let d=null;class VideoManager{constructor(){this.video=document.querySelector(".front__cover-video"),this.hasPlayedOnce=!1,this.video&&(this.boundOnVisibilityChange=this.onVisibilityChange.bind(this),this.boundAttemptPlay=this.attemptPlay.bind(this),this.addEventListeners(),this.attemptPlay())}addEventListeners(){document.addEventListener("visibilitychange",this.boundOnVisibilityChange),this.video.addEventListener("canplay",this.boundAttemptPlay,{once:!0})}async attemptPlay(){if(this.video&&this.video.paused)try{await this.video.play()}catch(e){console.warn("Video autoplay was prevented by the browser:",e.message)}}ready(){return new Promise((e=>{this.video.readyState>=3?e():this.video.addEventListener("canplay",e,{once:!0}),this.video.load()}))}onVisibilityChange(){this.video&&("visible"===document.visibilityState?requestAnimationFrame((()=>{this.video.currentTime=0,this.video.load(),this.attemptPlay()})):this.video.pause())}destroy(){this.video&&(this.video.pause(),this.video.removeEventListener("canplay",this.boundAttemptPlay)),document.removeEventListener("visibilitychange",this.boundOnVisibilityChange)}}let l=null;function initializeVideo(){l&&l.destroy(),l=new VideoManager}function initializeDropdown(){setTimeout((()=>{seamless.polyfill();const e=document.querySelector(".dropdown-toggle.js-only"),t=document.querySelector(".dropdown-wrapper");if(!e||!t)return;const o=e.cloneNode(!0);e.parentNode.replaceChild(o,e),o.addEventListener("click",(function(e){e.stopPropagation(),e.preventDefault();const o="true"===this.getAttribute("aria-expanded");if(this.setAttribute("aria-expanded",!o),t.classList.toggle("open",!o),!o){const e=30,o=t.getBoundingClientRect(),n=window.scrollY+o.top-e;seamless.scrollTo(window,{top:n,behavior:"smooth"})}})),c||(document.addEventListener("click",(function(e){const t=document.querySelector(".dropdown-wrapper"),o=document.querySelector(".dropdown-toggle.js-only");t&&o&&!t.contains(e.target)&&!o.contains(e.target)&&(t.classList.remove("open"),o.setAttribute("aria-expanded","false"))})),c=!0)}),100)}function closeDropdown(){const e=document.querySelector(".dropdown-wrapper"),t=document.querySelector(".dropdown-toggle.js-only");e&&e.classList.remove("open"),t&&t.setAttribute("aria-expanded","false")}function overlayEnter(){return new Promise((t=>{const o=document.createElement("div");o.classList.add("overlay"),document.body.appendChild(o),gsap.fromTo(o,{x:"-100%"},{x:"0%",duration:e,ease:a,onComplete:t})}))}function overlayLeave(){return new Promise((e=>{const o=document.querySelector(".overlay");o?gsap.to(o,{x:"100%",duration:t,ease:i,onComplete:()=>{o.remove(),e()}}):e()}))}function gsapFade(e,t,o,n,a,i){return e?new Promise((r=>{gsap.to(e,{opacity:o,duration:n,ease:a,onComplete:()=>{i&&i(),r()},onStart:()=>{e.style.opacity=t.toString()}})})):(console.error("Element not found for gsapFade"),Promise.resolve())}document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".fadein"),a=document.querySelector(".loading-overlay");if(a&&e){const c=a.querySelector(".loading-percentage"),u=a.querySelector(".progress-circle"),h=a.querySelector(".fallback-message"),p=a.querySelector(".enter-site-btn"),m=a.querySelector(".disable-overlay-btn"),y=a.querySelector(".loading-text"),v=a.querySelector(".progress-background"),g=u.r.baseVal.value,b=2*Math.PI*g;function setProgress(e){const t=b-e/100*b;u.style.strokeDashoffset=t,c.textContent=`${Math.round(e)}%`}u.style.strokeDasharray=`${b} ${b}`,u.style.strokeDashoffset=b;let w=0,f=0,E=null,S=!1;const L=700,T=performance.now();function progressTick(){const e=f-w;e>0&&(w+=.2*e,w=f<100?Math.min(w,f-.1):Math.min(w,100)),setProgress(w);const t=performance.now()-T;if(!S&&100===f&&w>=99.8&&t>=L)return S=!0,cancelAnimationFrame(E),setProgress(100),void setTimeout(onLoadingFinished,120);E=requestAnimationFrame(progressTick)}function onLoadingFinished(){clearTimeout(D);const e=gsap.timeline(),t=.3*(parseFloat(getComputedStyle(u).strokeWidth)||3);e.to(u,{strokeDashoffset:b,strokeWidth:t,opacity:0,duration:1.2,ease:"power2.inOut"}),e.to([c,v,y],{opacity:0,duration:.4,ease:"power1.in"},"<"),e.call((()=>{gsap.set([y,p],{autoAlpha:0,y:20}),y.textContent="Gatavs lasīšanai!",p.style.display="block"})),e.to([y,p],{autoAlpha:1,y:0,duration:.8,ease:"power2.out",stagger:.1,force3D:!0,immediateRender:!1})}function revealSite(){const o=gsap.timeline();o.to([p,y],{opacity:0,duration:.25,ease:"power2.in",stagger:.1}),o.to(a,{x:"100%",duration:1.5*t,ease:i,onComplete:()=>a.remove()}),o.to(e,{opacity:1,visibility:"visible",duration:t,ease:"power1.inOut"},"<")}const k=Array.from(document.images),x=document.querySelector(".front__cover-video"),q=k.length+(x?1:0);let P=0;function assetLoaded(){P++;const e=P/q*100,t=Math.min(95,e);f=Math.max(f,t),P===q&&(f=100)}x&&new Promise((e=>{x.readyState>=3?e():(x.addEventListener("canplaythrough",e,{once:!0}),x.addEventListener("error",e,{once:!0}),x.load())})).then(assetLoaded),function startProgressLoop(){null==E&&(E=requestAnimationFrame(progressTick))}(),0===q?f=100:k.forEach((e=>{e.complete&&0!==e.naturalHeight?assetLoaded():(e.addEventListener("load",(()=>assetLoaded()),{once:!0}),e.addEventListener("error",(()=>assetLoaded()),{once:!0}))}));const D=setTimeout((()=>{h.style.display="flex",gsap.to(h,{opacity:1,duration:.5})}),8e3);p.addEventListener("click",revealSite),m.addEventListener("click",(()=>{clearTimeout(D),revealSite()}))}document.querySelector('[data-barba-namespace="home"]')&&initializeVideo(),"scrollRestoration"in history&&(history.scrollRestoration="manual"),initializeDropdown(),barba.init({transitions:[{name:"post-fade",from:{namespace:["post"]},to:{namespace:["post"]},leave(e){closeDropdown();return gsapFade(e.current.container.querySelector(".content-wrapper"),1,0,n,s,(()=>{e.current.container.style.display="none"}))},enter(e){const t=e.next.container.querySelector(".content-wrapper");return t.style.display="block",t.style.opacity="0",gsapFade(t,0,1,o,r).then((()=>{initializeDropdown()}))}},{name:"home-to-any",from:{namespace:["home"]},to:{namespace:["post","default"]},leave:e=>overlayEnter().then((()=>{e.current.container.style.display="none"})),enter(e){initializeDropdown();const o=e.next.container.querySelector(".content-wrapper");o.style.opacity="0",o.style.display="block";const n=gsap.timeline();return n.add(overlayLeave()),n.to(o,{opacity:1,duration:t,ease:i}),n.finished}},{name:"any-to-home",from:{namespace:["post","default"]},to:{namespace:["home"]},leave:e=>overlayEnter().then((()=>{e.current.container.style.display="none"})),enter(e){const o=e.next.container;return gsap.set(o,{opacity:0}),initializeVideo(),l.ready().then((()=>(l.attemptPlay(),Promise.all([overlayLeave(),gsap.to(o,{opacity:1,duration:t,ease:i})]))))}},{name:"post-to-default",from:{namespace:["post","default"]},to:{namespace:["default"]},leave:e=>overlayEnter().then((()=>{e.current.container.style.display="none"})),enter(e){const o=e.next.container.querySelector(".content-wrapper");o.style.opacity="0",o.style.display="block";const n=overlayLeave(),a=new Promise((e=>{gsap.to(o,{opacity:1,duration:t,ease:i,onComplete:e})}));return Promise.all([n,a])}},{name:"default-to-post",from:{namespace:["default"]},to:{namespace:["post"]},leave:e=>overlayEnter().then((()=>{e.current.container.style.display="none"})),enter(e){const o=e.next.container.querySelector(".content-wrapper");o.style.opacity="0",o.style.display="block";const n=overlayLeave(),a=new Promise((e=>{gsap.to(o,{opacity:1,duration:2*t,ease:i,onComplete:e})}));return Promise.all([n,a])}}]}),barba.hooks.beforeLeave((()=>{})),barba.hooks.leave((e=>{e&&e.next&&["post"].includes(e.next.namespace)&&closeDropdown()})),barba.hooks.afterLeave((e=>{const t=document.querySelector('[data-barba-namespace="home"]');t&&(t.style.opacity="",t.style.display=""),function resetScrollPosition(){window.scrollTo({top:0,behavior:"auto"})}(),"home"===e.current.namespace&&l&&(l.destroy(),l=null),"post"===e.current.namespace&&d&&(d.destroy(),d=null),["post","default"].includes(e.current.namespace)&&document.removeEventListener("keydown",handleDropdownKeys)})),barba.hooks.beforeEnter((e=>{!function updateHead(e){const t=document.head,o=e.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[1],n=document.createElement("div");n.innerHTML=o,["meta[name='description']","meta[property='og:description']"].forEach((e=>{const o=t.querySelector(e),a=n.querySelector(e);o&&a?o.setAttribute("content",a.getAttribute("content")):a&&t.appendChild(a.cloneNode(!0))}))}(e.next.html),function updateFooter(e){const t=document.querySelector(".footer"),o=e.match(/<footer[^>]*>([\s\S.]*)<\/footer>/i)[1],n=document.createElement("div");n.innerHTML=o,t.innerHTML=n.innerHTML}(e.next.html),function updateFooterClass(e){const t=document.querySelector(".footer");t&&("home"===e?t.classList.add("index"):t.classList.remove("index"))}(e.next.namespace)})),barba.hooks.enter((()=>{})),barba.hooks.afterEnter((e=>{["post","default"].includes(e.next.namespace)&&(initializeDropdown(),function setActiveLink(){const e=window.location.pathname.replace(/\/$/,""),t=Array.from(document.querySelectorAll(".footer-link"));document.activeElement&&document.activeElement.blur();const o=[],n=[];t.forEach((t=>{t.getAttribute("href").replace(/\/$/,"")===e?o.push(t):n.push(t)})),n.forEach((e=>e.classList.remove("active"))),o.forEach((e=>e.classList.add("active")))}(),document.addEventListener("keydown",handleDropdownKeys)),"post"===e.next.namespace&&(d=new PostNavigator(e.next.container)),"home"!==e.next.namespace||l||initializeVideo()}))}));